---
description: Quáº£n lÃ½ Ä‘a ngÃ´n ngá»¯ toÃ n diá»‡n. KÃ­ch hoáº¡t khi: thÃªm View má»›i Â· cÃ³ UI text Â· thÃªm/sá»­a ngÃ´n ngá»¯ Â· nghi ngá» bá» sÃ³t key Â· sync ngÃ´n ngá»¯. DÃ¹ng /i18n Ä‘á»ƒ cháº¡y validation + sync tá»± Ä‘á»™ng.
---

# /i18n - Internationalization Workflow

$ARGUMENTS

---

## Pre-Flight: Auto-Discovery

```
1. XÃ¡c Ä‘á»‹nh i18n framework: i18next Â· react-intl Â· vue-i18n Â· flutter_localizations Â· iOS .strings
2. TÃ¬m source of truth: en.json / en.ts / Localizable.strings / arb files
3. Liá»‡t kÃª táº¥t cáº£ file ngÃ´n ngá»¯ hiá»‡n cÃ³
4. Scan toÃ n bá»™ UI components â†’ tÃ¬m raw string cÃ²n sÃ³t
5. Kiá»ƒm tra terminal-mcp / filesystem-mcp Ä‘á»ƒ cháº¡y validation tá»± Ä‘á»™ng
```

---

## Sub-commands

```
/i18n              - Kiá»ƒm tra toÃ n bá»™, bÃ¡o cÃ¡o missing keys
/i18n sync         - Tá»± Ä‘á»™ng sync táº¥t cáº£ file ngÃ´n ngá»¯ theo source of truth
/i18n add [view]   - ÄÄƒng kÃ½ keys cho View má»›i
/i18n audit        - QuÃ©t raw string trong toÃ n bá»™ codebase
/i18n validate     - Cháº¡y validation Count(key_source) â‰¡ Count(key_target)
/i18n missing      - Liá»‡t kÃª keys thiáº¿u theo tá»«ng ngÃ´n ngá»¯
```

---

## 4 Quy táº¯c Cá»‘t lÃµi (KHÃ”NG NGOáº I Lá»†)

```
RULE 1 â€” KEY-ONLY UI
  âŒ <Button>Submit</Button>
  âŒ placeholder="Enter email"
  âŒ aria-label="Close dialog"
  âœ… <Button>{t('common.button.submit')}</Button>
  âœ… placeholder={t('auth.input.email.placeholder')}
  âœ… aria-label={t('dialog.close.ariaLabel')}
  Ãp dá»¥ng: Label Â· Button Â· Placeholder Â· Tooltip Â· Aria-label
           Error message Â· Toast Â· Modal title Â· Empty state

RULE 2 â€” SOURCE OF TRUTH (Má»™t chiá»u, khÃ´ng Ä‘áº£o)
  en.json â†’ code UI â†’ vi.json / ja.json / ...
  View má»›i: Ä‘Äƒng kÃ½ key vÃ o en.json TRÆ¯á»šC khi viáº¿t UI
  XÃ³a feature: xÃ³a key khá»i en.json â†’ xÃ³a mirror cÃ¹ng lÃºc

RULE 3 â€” MIRRORING 100%
  Count(en.json) â‰¡ Count(vi.json) â‰¡ Count(*.json) â€” má»i lÃºc
  Cáº¥u trÃºc nested pháº£i khá»›p hoÃ n toÃ n
  Missing key = bug nghiÃªm trá»ng, khÃ´ng merge Ä‘Æ°á»£c

RULE 4 â€” PRE-COMMIT VALIDATION
  Cháº¡y validate TRÆ¯á»šC khi bÃ¡o hoÃ n thÃ nh báº¥t ká»³ task nÃ o cÃ³ UI
  ChÃªnh lá»‡ch â†’ tá»± Ä‘á»™ng bá»• sung + bÃ¡o cÃ¡o
```

---

## Key Naming Convention

```
[feature].[element].[descriptor]

âœ… auth.login.button.submit
âœ… auth.login.input.email.placeholder
âœ… auth.login.error.invalidCredentials
âœ… common.button.cancel
âœ… common.table.empty.message
âœ… nav.sidebar.item.dashboard

âŒ btn1 Â· submit Â· label_email Â· ERR_001
```

---

## Workflow: ThÃªm View Má»›i

```
BÆ¯á»šC 1 â€” ÄÄƒng kÃ½ keys vÃ o en.json
  Liá»‡t kÃª Táº¤T Cáº¢ text sáº½ xuáº¥t hiá»‡n trong View:
  - Titles, headings
  - Button labels
  - Input placeholders + labels
  - Validation/error messages
  - Empty states
  - Toast/notification messages
  - Aria-labels cho accessibility

BÆ¯á»šC 2 â€” Mirror sang táº¥t cáº£ ngÃ´n ngá»¯
  Vá»›i má»—i file ngÃ´n ngá»¯:
  - ThÃªm key vá»›i giÃ¡ trá»‹ placeholder: "[TODO: translate]"
  - Giá»¯ nguyÃªn cáº¥u trÃºc nested nhÆ° en.json

BÆ¯á»šC 3 â€” Viáº¿t UI vá»›i keys
  KhÃ´ng má»™t raw string nÃ o trong JSX/template

BÆ¯á»šC 4 â€” Validate
  Count(en.json) â‰¡ Count(vi.json) â‰¡ ...
  BÃ¡o cÃ¡o káº¿t quáº£
```

---

## Workflow: PhÃ¡t hiá»‡n & Sá»­a Bá» sÃ³t

```
BÆ¯á»šC 1 â€” Scan raw strings
  TÃ¬m: text trong JSX khÃ´ng cÃ³ t() / $t() / intl.formatMessage()
  TÃ¬m: placeholder/title/aria-label lÃ  string literal
  Tools: grep hoáº·c terminal-mcp

BÆ¯á»šC 2 â€” Liá»‡t kÃª vi pháº¡m
  File: [path]
  DÃ²ng: [line]
  Raw text: "[text]"
  Äá» xuáº¥t key: [feature].[element].[descriptor]

BÆ¯á»šC 3 â€” Tá»± Ä‘á»™ng fix
  ThÃªm key vÃ o en.json
  Thay raw string báº±ng t('[key]')
  Mirror key sang táº¥t cáº£ ngÃ´n ngá»¯

BÆ¯á»šC 4 â€” Validate láº¡i
```

---

## Validation Script

```bash
# Cháº¡y vá»›i terminal-mcp
node scripts/i18n-validate.js
# hoáº·c
python scripts/i18n_check.py

# Output máº«u:
# âœ… en.json: 234 keys
# âœ… vi.json: 234 keys â€” SYNCED
# âŒ ja.json: 229 keys â€” MISSING 5 KEYS:
#    auth.login.error.sessionExpired
#    common.table.empty.message
#    ...
# ğŸ” Raw strings found: 3
#    src/features/auth/LoginForm.tsx:45 â€” "Sign in"
#    src/features/dashboard/Header.tsx:12 â€” "Dashboard"
```

---

## Output Format

```markdown
## ğŸŒ I18N Report

### Validation
| File | Keys | Status |
|---|---|---|
| en.json | 234 | âœ… Source |
| vi.json | 234 | âœ… Synced |
| ja.json | 229 | âŒ Missing 5 |

### Missing Keys (ja.json)
- `auth.login.error.sessionExpired` â†’ [TODO: translate]
- `common.table.empty.message` â†’ [TODO: translate]

### Raw Strings Detected
| File | Line | Text | Äá» xuáº¥t Key |
|---|---|---|---|
| LoginForm.tsx | 45 | "Sign in" | auth.login.button.signIn |
| Header.tsx | 12 | "Dashboard" | nav.header.title.dashboard |

### Actions Taken
- [x] ThÃªm 5 keys vÃ o ja.json
- [x] Fix 2 raw strings â†’ t() calls
- [x] Validate: PASS âœ…
```

---

## Pre-commit Checklist

- [ ] KhÃ´ng cÃ³ raw string trong UI components (audit sáº¡ch)
- [ ] Keys má»›i Ä‘Ã£ cÃ³ trong en.json trÆ°á»›c khi viáº¿t UI
- [ ] Count(en.json) â‰¡ Count(má»i file ngÃ´n ngá»¯)
- [ ] Keys cÃ³ naming Ä‘Ãºng convention
- [ ] Aria-labels Ä‘Ã£ Ä‘Æ°á»£c i18n hÃ³a
- [ ] Placeholder translations dÃ¹ng [TODO: translate] náº¿u chÆ°a dá»‹ch
- [ ] Validation script cháº¡y PASS

---

## Key Principles

- **Má»™t chiá»u:** en.json â†’ code â†’ mirror. KhÃ´ng bao giá» ngÆ°á»£c láº¡i.
- **Fail fast:** Missing key = lá»—i build, khÃ´ng pháº£i warning
- **Placeholder OK:** `[TODO: translate]` tá»‘t hÆ¡n lÃ  thiáº¿u key
- **Accessibility Ä‘i Ä‘Ã´i:** i18n aria-label = i18n + a11y cÃ¹ng lÃºc
